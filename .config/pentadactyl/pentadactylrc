" ~/.pentadactylrc

" Keep ~ clean.
set runtimepath=~/.config/pentadactyl

loadplugins '\.(js|penta)$'
group user

" UI.
"source ~/.config/pentadactyl/chrome.css
source ~/.config/pentadactyl/simple.css

set guioptions=Csn
set hlfind

command jsenable -nargs=1 :set! javascript.enabled=<args>
nmap <A-z> :jsenable true<CR>
nmap <A-x> :jsenable false<CR>

" Speed up scrolling.
nmap -b h 5h
nmap -b j 5j
nmap -b k 5k
nmap -b l 5l

" Tab control.
nmap <A-h> -e :tabprev
nmap <A-l> -e :tabnext
nmap <A-S-h> -e :tabmove -1
nmap <A-S-l> -e :tabmove +1

" Toggle bookmark toolbar.
"nmap s -e :toolbartoggle Bookmarks Toolbar

" Easily show downloads.
nmap <S-d> -e :downloads

" Stop <C-j> and <C-k> doing whatever they do.
nmap <C-j> <nop>
nmap <C-k> <nop>

" Open the current URL as an argument to mpv.
nmap <S-u> -e :launchv

nmap <C-l> -e :nohl

" Use vim instead of gvim for now.
set editor='termite -e "vim +<line> <file>"'

" Hide the status bar when using fullscreen.
au fullscreen on set go-=s
au fullscreen off set go+=s

" Fix ublock's popup not being displayed.
" * https://github.com/chrisaljoudi/uBlock/issues/720
" * https://github.com/chrisaljoudi/uBlock/issues/549
style -name ublick * #nav-bar * {visibility: visible;}

" Style.
colorscheme hints

" Change some default about:configs.
set! browser.search.defaultenginename=DDG Bangs
set! extensions.checkCompatibility=false
set! media.peerconnection.enabled=false
set! middlemouse.contentLoadURL=false
set! network.cookie.cookieBehavior=1
set! plugins.click_to_play=true
set! general.smoothScroll=false
set! plugin.default.state=1

" Look at our precision designed curves, lol.  No.
set! browser.devedition.theme.enabled=true

" Preferences, mostly added for reproducability from a single configuration.
set! font.name.monospace.x-western=Inconsolatazi4
set! font.name.serif.x-western=Georgia
set! font.minimum-size.x-western=16

" Disable all kinds of additional crap that leaks private data.
" Straight from the school of enumerating badness.
set! browser.safebrowsing.downloads.enabled=false
set! browser.safebrowsing.malware.enabled=false
set! browser.safebrowsing.enabled=false

set! browser.search.suggest.enabled=false
set! network.http.sendRefererHeader=0
set! network.prefetch-next=false
set! browser.pocket.enabled=false
set! geo.enabled=false

" Firefox can honestly go to hell.
set! datareporting.healthreport.service.enabled=false
set! datareporting.healthreport.uploadEnabled=false
set! toolkit.telemetry.enabled=false
set! browser.selfsupport.url=""

" Fuck EME and the scum suckers that supported getting this trash into the
" standard.
set! media.gmp-eme-adobe.enabled=false
set! media.eme.enabled=false

" Disable "Firefox Hello" garbage.
set! loop.enabled=false

" Disable WebRTC crap.
set! media.peerconnection.enabled=false

" Globally disable javascript.
set! privacy.trackingprotection.enabled=true
set! javascript.enabled=false

" Require websites preform safe ssl negotiation.
set! security.ssl.treat_unsafe_negotiation_as_broken=true
set! security.ssl.require_safe_negotiation=true

" Try in futility to disable HTML5 video/audio. 
" Note: Autoplay disable doesn't actually prevent autoplay because that would
"       be too simple. <https://bugzil.la/659285>
set! media.autoplay.enabled=false
set! media.gstreamer.enabled=false
set! media.webm.enabled=false
set! media.opus.enabled=false
set! media.wave.enabled=false
set! media.ogg.enabled=false
